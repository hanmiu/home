<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1" />
<!--
<meta property="og:url" content="https://www.hanmiu.cc/play/toy/ctr.html" />
<meta property="og:type" content="article" />
<meta property="og:title" content="‚óè ‚ñ≤ ‚ñ†" />
<meta property="og:description" content="" />
<meta property="og:image" content="https://www.hanmiu.cc/images/logotype/preview.jpg" />
-->
<title>‚óè ‚ñ≤ ‚ñ†</title>
<!--
<link rel="icon" type="image/png" href="./images/logotype/favicon.png">
-->
<style>
  body {
    margin: 0;
    overflow: hidden;
  }
  
  .ui {
    display: flex;
    position: fixed;
    box-sizing: border-box;
    width: 100%;
    height: 50px;
    justify-content: center;
    user-select: none;
  }
  
  #ui-up {
    left: 0px;
    top: 0px;
    background-color: aquamarine;
  }
  
  #ui-down {
    left: 0px;
    bottom: 0px;
    background-color: aquamarine;
  }
  
  .bt {
    display: inline-flex;
    width: 50px;
    height: 50px;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
  
  #canvas {
    position: fixed;
    left: 0px;
    top: 0px;
  }
</style>
<body>
  <canvas id="canvas"></canvas>
  <div class="ui" id="ui-up">
    <div class="bt">üì∑</div>
    <div class="bt">‚óè</div>
    <div class="bt">‚ñ≤</div>
    <div class="bt">‚ñ†</div>
    <div class="bt">‚úèÔ∏è</div>
  </div>
  <div class="ui" id="ui-down">
    <div class="bt">üíæ</div>
    <div class="bt">Ìïú</div>
    <div class="bt">‚ùå</div>
  </div>
</body>
<script>
  let g = document.querySelector('#canvas').getContext('2d');
  
  function touchstart(e) {
    /*
    let eX, eY;
    if(e.targetTouches) {
      eX = e.targetTouches[0].pageX;
      eY = e.targetTouches[0].pageY;
	}
    else {
      eX = e.pageX;
      eY = e.pageY;
    }
    touchX = eX;
    touchY = eY;
    
    mdown = true;
    for(let i = 0; i < jamos.length; i++) {
      let jamo = jamos[i];
      let dx = eX - jamo.x;
      let dy = eY - jamo.y;
      let d = Math.sqrt(dx*dx + dy*dy) + 1e-6;
      if(d < jamo.r) {
        selected_jamo = jamo;
        jamo.vx = 0;
        jamo.vy = 0;
        jamo.to_hue = Math.random() < 0.2 ? Math.random() * 30 | 0 : 100 + Math.random() * 260 | 0;
      }
    }
    */
  }
  
  function touchmove(e) {
    let eX, eY;
    if(e.targetTouches) {
      e.preventDefault();
      eX = e.targetTouches[0].pageX;
      eY = e.targetTouches[0].pageY;
	}
    else {
      eX = e.pageX;
      eY = e.pageY;
    }
    /*
    touchX = eX;
    touchY = eY;
    
    if(selected_jamo && mdown) {
      selected_jamo.x = eX;
      selected_jamo.y = eY;
    }
    */
  }
  
  function touchend(e) {
    //mdown = false;
    //selected_jamo = null;
  }
  
  function layout() {
    g.canvas.width = innerWidth;
    g.canvas.height = innerHeight;
    document.querySelector('#ui-down').style.bottom = '0px';
  }
  
  function init() {
    layout();
  }
  
  g.canvas.addEventListener('mousedown', touchstart);
  g.canvas.addEventListener('mouseup', touchend); 
  g.canvas.addEventListener('mousemove', touchmove);
  
  g.canvas.addEventListener('touchstart', touchstart);
  g.canvas.addEventListener('touchend', touchend);
  g.canvas.addEventListener('touchmove', touchmove);
  
  window.addEventListener('resize', layout);
  
  init();
</script>