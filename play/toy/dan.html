<!DOCTYPE html>
<meta charset="utf-8">
<style>
    /* #player {
        transition: all 0.2s ease-in-out;
    } */
</style>
<body>
    <svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
        <g transform="matrix(2.70081,0,0,2.70081,-184.564,-182.363)">
            <path d="M86,102.5L86,120L134.5,120C182.333,120 183,119.973 183,118C183,116.029 182.333,116 137,116L91,116L91,89L240,89L240,104.5C240,119.265 240.094,120 241.974,120C243.841,120 243.963,119.173 244.224,104.75L244.5,89.5L362.5,89.5L362.5,115.5L271,116.02L271,146L214,146L214,116L209,116L209,151L271,151L271,177L183,177L183,161.5C183,146.667 182.914,146 181,146C179.04,146 179,146.667 179,179C179,211.188 179.049,212 180.974,212C182.841,212 182.963,211.173 183.224,196.75L183.5,181.5L209,180.94L209,238L148,238L148,335L165.5,335C182.981,335 183,334.998 183.001,332.75C183.001,330.515 182.9,330.5 167.751,330.5L152.5,330.5L152.239,286.75L151.979,243L214,243L214,181.147L244.5,181.324L275,181.5L275,151L306,151L306,146L275,146L275,120L367,120L367,89L393,89L393,177L367,177L367,146L332,146L332,151L363,151L363,181.5C363,211.199 363.052,212 364.974,212C366.841,212 366.963,211.173 367.224,196.75L367.5,181.5L397.5,181.426L398.02,89L424,89L424,208L393,208L393,269L367,269L367,238L332,238L332,243L363,243L363,274L398,274L398,212L424,212L424,300L336,300L336,269L306,269L306,238L301,238L301,304L306,304L306,274L332.031,274L331.766,302.25L331.5,330.5L271.5,330.69L271.236,363.345L270.973,396L288.486,396C305.333,396 306,395.924 306,394C306,392.086 305.333,392 290.5,392L275,392L275,335L301,335L301,366L306,366L306,335L335.948,335L336.5,304.5L380.25,304.239L424,303.979L424,361L367,361L367,335L382.57,335C397.904,335 398.134,334.968 397.82,332.863C397.508,330.777 397.098,330.727 380.5,330.731L363.5,330.735L363.224,345.867L362.948,361L332,361L332,366L428,366L428,85L86,85L86,102.5M86.667,146.667C86.3,147.033 86,210.258 86,287.167L86,427L428,427L428,392L395.5,392C363.667,392 363,392.041 363,394C363,395.956 363.667,396 393.5,396L424,396L424,423.021L380.25,422.761L336.5,422.5L336.224,407.25C335.963,392.827 335.841,392 333.974,392C332.094,392 332,392.735 332,407.5L332,423L183,423L183,396L213.5,396C243.333,396 244,395.956 244,394C244,392.089 243.333,392 229,392L214,392L214,300L183,300L183,274L240,274L240,320C240,365.222 240.034,366 241.986,366C243.917,366 243.978,365.17 244.236,335.25L244.5,304.5L275,303.948L275,212L306,212L306,181.305L332,180.877L332,196.438C332,211.333 332.086,212 334,212C335.924,212 336,211.333 336,194.5L336,177L301,177L301,208L240,208L240,225.5C240,242.333 240.076,243 242,243C243.914,243 244,242.333 244,227.5L244,212L271,212L271,300L244,300L244,269L179,269L179,304L209,304L209,361L148,361L148,378.5C148,395.333 148.076,396 150,396C151.911,396 152,395.333 152,381L152,366L209,366L209,392L179.052,392L178.5,422.5L150.25,422.766L122,423.031L122,300L117,300L117,423L91,423L91,274L122,274L122,212L152,212L152,177L116.861,177L117.18,179.25C117.496,181.469 117.706,181.5 132.5,181.5L147.5,181.5L148.058,208L117,208L117,269L91,269L91,151L152,151L152,146L119.667,146C101.883,146 87.033,146.3 86.667,146.667"/>
        </g>
        <text id="player" x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;">3</text>
        <g transform="matrix(1,0,0,1,288.593,158.085)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(254,0,0);">+4</text>
        </g>
        <g transform="matrix(1,0,0,1,770.015,241.787)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(254,0,0);">+5</text>
        </g>
        <g transform="matrix(1,0,0,1,214.292,408.816)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(0,0,255);">-2</text>
        </g>
        <g transform="matrix(1,0,0,1,770.015,-55.9315)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(254,0,0);">+6</text>
        </g>
        <g transform="matrix(1,0,0,1,201.173,740.447)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(0,0,255);">-1</text>
        </g>
        <g transform="matrix(1,0,0,1,-54.84,740.447)">
            <text x="128.157px" y="201.621px" style="font-family:'ArialMT', 'Arial', sans-serif;font-size:50px;fill:rgb(0,0,255);">-3</text>
        </g>
    </svg>
</body>
<script>
    const player = document.getElementById("player");
    let x = 128.157;
    let y = 201.621;
    let p = {};
    p.x = x;
    p.y = y;
    p.tox = x;
    p.toy = y;

    document.addEventListener("keydown", (event) => {
        event.preventDefault();
        switch (event.key) {
            case "ArrowUp":
                p.toy -= 10;
                break;
            case "ArrowDown":
                p.toy += 10;
                break;
            case "ArrowLeft":
                p.tox -= 10;
                break;
            case "ArrowRight":
                p.tox += 10;
                break;
        }
        // player.setAttribute("x", x + "px");
        // player.setAttribute("y", y + "px");

        // player의 위치에 맞춰서 스크롤을 이동시킨다.

        // Player가 다른 text와 충돌하면 해당 text의 숫자를 player의 숫자에 더하고, 충돌한 text는 사라진다.
        const textList = document.querySelectorAll("text");
        textList.forEach((text) => {
            if (text === player) return;
            if (isCollide(player, text)) {
                const number = parseInt(text.textContent);
                const playerNumber = parseInt(player.textContent);
                player.textContent = playerNumber + number;
                text.remove();
            }
        });
        // isCollide 구현
        function isCollide(a, b) {
            const aRect = a.getBoundingClientRect();
            const bRect = b.getBoundingClientRect();

            return !(
                aRect.top + aRect.height < bRect.top ||
                aRect.top > bRect.top + bRect.height ||
                aRect.left + aRect.width < bRect.left ||
                aRect.left > bRect.left + bRect.width
            );
        }
    });

    function loop() {
        p.x += (p.tox - p.x) * 0.2;
        p.y += (p.toy - p.y) * 0.2;
        player.setAttribute("x", p.x + "px");
        player.setAttribute("y", p.y + "px");
        window.scrollTo(p.x, p.y);
        requestAnimationFrame(loop);
    }

    loop();

</script>