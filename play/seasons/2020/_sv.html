<!doctype html>
<meta charset="utf-8">
<title>신기한 여름방학</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
  }
  
  #title {
    position: fixed;
    left: 0px;
    top: 0px;
    display: flex;
    box-sizing: border-box;
    width: 100vw;
    height: 10vh;
    background-color: bisque;
    align-items: center;
    justify-content: center;
    font-size: 5vh;
    z-index: 100;
  }
  
  #spots {
    position: fixed;
    left: 0px;
    top: 10vh;
    box-sizing: border-box;
    width: 25vw;
    height: 90vh;
    background-color: #b0ffe7;
    overflow-y: scroll;
    user-select: none;
    -webkit-user-select: none;
  }
  
  .spot {
    display: inline-block;
    width: 16vw;
    height: 16vw;
    margin: 4vw 0.5vw 0vw 3vw;
    background-color: azure;
    border-radius: 20vw;
    border: 1.5vw solid #90e5e5;
    background-size: contain;
  }
  
  #content {
    position: fixed;
    left: 25vw;
    top: 10vh;
    box-sizing: border-box;
    width: 75vw;
    height: 70vh;
    background-color: #fffcb0;
    overflow-y: scroll;
    user-select: none;
    -webkit-user-select: none;
    background-image: url(./spots/1.png);
    background-size: contain;
  }
  
  #control {
    position: fixed;
    left: 25vw;
    bottom: 0vh;
    box-sizing: border-box;
    width: 75vw;
    height: 20vh;
    background-color: #d1b0ff;
    user-select: none;
    -webkit-user-select: none;
  }
  
  #notice {
    color: aqua;
    font-size: 10vh;
  }
  
  #dice {
    width: 200px;
    height: 200px;
    font-size: 180px;
    line-height: 200px;
  }
  
  #info {
    font-size: 20px;
  }
</style>
<body>
  <div id="title">신기한 여름방학</div>
  <div id="spots"></div>
  <div id="content"></div>
  <div id="control"></div>
  
  <!--
  <button id="roll">주사위 굴리기</button>
  <div id="dice">⚀</div>
  <div id="info"></div>
  -->
</body>
<script>
  let el_spots = document.querySelector('#spots');
  
  let spots = [];
  
  for(let i = 0; i < 40; i++) {
    let el_spot = document.createElement('div');
    el_spot.className = 'spot';
    el_spot.style['background-image'] = `url(./spots/${i}.png)`;
    el_spot.onclick = fire;
    spots.push(el_spot);
    el_spots.appendChild(el_spot);
  }
  
  function fire(e) {
    let idx = spots.indexOf(e.target);
    document.querySelector('#title').textContent = idx;
    document.querySelector('#content').style['background-image'] = `url(./spots/${idx}.png)`;
  }
  
  function jump_to(n) {
    if(spots[n]) {
      spots[n].scrollIntoView(false);
    }
  }
  /*
  let bt_roll = document.querySelector('#roll');
  let el_dice = document.querySelector('#dice');
  let el_info = document.querySelector('#info');
  let dice_states = `⚀ ⚁ ⚂ ⚃ ⚄ ⚅`.split(' ');
  let frame_count = 0;
  let n_rolling = 10;
  let current_face = 0;
  
  function roll() {
    return Math.random() * 6 + 1 | 0;
  }
  
  function roll_the_dice() {
    current_face = roll() - 1;
    el_dice.textContent = dice_states[current_face];
  }
  
  bt_roll.onclick = function() {
    n_rolling = 10 + Math.random() * 5 | 0;  
  }
  
  function update() {
    if(n_rolling > 0) {
      if(frame_count % 10 === 0) {
        el_dice.style['color'] = 'gray';
        roll_the_dice();
        n_rolling -= 1;
        if(n_rolling === 0) {
          el_dice.style['color'] = 'black';
        }
      }
    }
    frame_count += 1;
  }
  
  function loop() {
    update();
    requestAnimationFrame(loop);
  }
  */
  
  function init() {
    
    let params = new URLSearchParams(location.search.slice(1));
    let title = params.get('w');
    let desc = '';
    
    switch(params.get('w')) {
      case 'abc':
        desc = `어떤 미션`;
        break;
      case 'def':
        desc = `주사위를 굴려 ${dice_states[roll()-1]}이 나오면 샛길로 점프`;
        break;
      case 'hij':
        desc = `설정한 약속 실행하기`;
        break;
      case 'G':
        desc = `Goal`;
        break;
    }
    
    // el_info.textContent = desc;
    
    //loop();
  }
  
  window.onload = init;
</script>